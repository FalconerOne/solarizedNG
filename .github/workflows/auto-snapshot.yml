name: Auto Snapshot

on:
  push:
    branches:
      - main
    paths-ignore:
      - 'README.md'
      - '**/*.md'
      - 'docs/**'
      - '.github/workflows/snapshot.yml'
      - '.github/ISSUE_TEMPLATE/**'

jobs:
  snapshot:
    name: Create Auto Snapshot
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Create timestamp
        id: timestamp
        run: echo "timestamp=$(date +'%Y%m%d-%H%M%S')" >> $GITHUB_OUTPUT

      - name: Create snapshot branch
        run: |
          SNAPSHOT_BRANCH="auto-snapshot-${{ steps.timestamp.outputs.timestamp }}"
          git checkout -b "$SNAPSHOT_BRANCH"
          git push origin "$SNAPSHOT_BRANCH"

      - name: Log confirmation
        run: echo "âœ… Auto snapshot branch created: auto-snapshot-${{ steps.timestamp.outputs.timestamp }}"
